# Reference
<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

**Classes**

* [`backuppc::client`](#backuppcclient): 
* [`backuppc::params`](#backuppcparams): Params class for backuppc used as a vehicle to pick up OS specific
defaults from hiera. The defaults in this class are suitable for Debian
systems.
* [`backuppc::server`](#backuppcserver): 

**Defined types**

* [`backuppc::server::user`](#backuppcserveruser): Add user credentials to the backuppc htpasswd file.

**Data types**

* [`Backuppc::BackupFiles`](#backuppcbackupfiles): List of filws to ne included or excluded.
* [`Backuppc::BlackoutPeriods`](#backuppcblackoutperiods): Periods where scheduled backups do not take place.  One or more blackout
periods can be specified. If a client is subject to blackout then no regular
(non-manual) backups will be started during any of these periods.  hourBegin
and hourEnd specify hours from midnight and weekDays is a list of days of
* [`Backuppc::DhcpAddressRange`](#backuppcdhcpaddressrange): List of DHCP address ranges we search looking for PCs to backup.
* [`Backuppc::XferLogLevel`](#backuppcxferloglevel): Level of verbosity in Xfer log files.
* [`Backuppc::XferMethod`](#backuppcxfermethod): What transport method to use to backup each host.

## Classes

### backuppc::client

The backuppc::client class.

#### Parameters

The following parameters are available in the `backuppc::client` class.

##### `ensure`

Data type: `Enum['present','absent']`



Default value: 'present'

##### `config_name`

Data type: `Stdlib::Fqdn`



Default value: $facts['networking']['fqdn']

##### `backuppc_hostname`

Data type: `Optional[Stdlib::Fqdn]`



Default value: `undef`

##### `client_name_alias`

Data type: `Optional[Stdlib::Fqdn]`



Default value: `undef`

##### `system_account`

Data type: `Optional[String]`



Default value: 'backup'

##### `system_home_directory`

Data type: `Stdlib::Absolutepath`



Default value: '/var/backups'

##### `system_additional_commands`

Data type: `Optional[Array[String]]`



Default value: `undef`

##### `system_additional_commands_noexec`

Data type: `Optional[Array[String]]`



Default value: `undef`

##### `manage_sudo`

Data type: `Boolean`



Default value: `false`

##### `manage_rsync`

Data type: `Boolean`



Default value: `true`

##### `full_period`

Data type: `Optional[Numeric]`



Default value: `undef`

##### `full_keep_cnt`

Data type: `Optional[Integer]`



Default value: `undef`

##### `full_age_max`

Data type: `Optional[Integer]`



Default value: `undef`

##### `incr_period`

Data type: `Optional[Numeric]`



Default value: `undef`

##### `incr_keep_cnt`

Data type: `Optional[Integer]`



Default value: `undef`

##### `incr_age_max`

Data type: `Optional[Integer]`



Default value: `undef`

##### `incr_levels`

Data type: `Optional[Array[Integer]]`



Default value: `undef`

##### `incr_fill`

Data type: `Optional[Boolean]`



Default value: `undef`

##### `partial_age_max`

Data type: `Optional[Integer]`



Default value: `undef`

##### `blackout_bad_ping_limit`

Data type: `Optional[Integer]`



Default value: `undef`

##### `ping_max_msec`

Data type: `Optional[Integer]`



Default value: `undef`

##### `ping_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `blackout_good_cnt`

Data type: `Optional[Integer]`



Default value: `undef`

##### `blackout_periods`

Data type: `Optional[Backuppc::BlackoutPeriods]`



Default value: `undef`

##### `backups_disable`

Data type: `Boolean`



Default value: `false`

##### `xfer_method`

Data type: `Backuppc::XferMethod`



Default value: 'rsync'

##### `xfer_loglevel`

Data type: `Backuppc::XferLogLevel`



Default value: 1

##### `smb_share_name`

Data type: `Optional[String]`



Default value: `undef`

##### `smb_share_username`

Data type: `Optional[String]`



Default value: `undef`

##### `smb_share_passwd`

Data type: `Optional[String]`



Default value: `undef`

##### `smb_client_full_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `smb_client_incr_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `smb_client_restore_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `tar_share_name`

Data type: `Optional[String]`



Default value: `undef`

##### `tar_client_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `tar_full_args`

Data type: `Optional[String]`



Default value: `undef`

##### `tar_incr_args`

Data type: `Optional[String]`



Default value: `undef`

##### `tar_client_restore_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `rsync_client_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `rsync_client_restore_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `rsync_share_name`

Data type: `Optional[String]`



Default value: `undef`

##### `rsyncd_client_port`

Data type: `Optional[Integer]`



Default value: `undef`

##### `rsyncd_user_name`

Data type: `Optional[String]`



Default value: `undef`

##### `rsyncd_passwd`

Data type: `Optional[String]`



Default value: `undef`

##### `rsyncd_auth_required`

Data type: `Boolean`



Default value: `false`

##### `rsync_csum_cache_verify_prob`

Data type: `Optional[Integer]`



Default value: `undef`

##### `rsync_args`

Data type: `Optional[Array[String]]`



Default value: `undef`

##### `rsync_args_extra`

Data type: `Optional[Array[String]]`



Default value: `undef`

##### `rsync_restore_args`

Data type: `Optional[Array[String]]`



Default value: `undef`

##### `backup_files_only`

Data type: `Optional[Backuppc::BackupFiles]`



Default value: `undef`

##### `backup_files_exclude`

Data type: `Optional[Backuppc::BackupFiles]`



Default value: `undef`

##### `dump_pre_user_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `dump_post_user_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `dump_pre_share_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `dump_post_share_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `restore_pre_user_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `restore_post_user_cmd`

Data type: `Optional[String]`



Default value: `undef`

##### `user_cmd_check_status`

Data type: `Optional[Boolean]`



Default value: `undef`

##### `email_notify_min_days`

Data type: `Optional[Integer]`



Default value: `undef`

##### `email_from_user_name`

Data type: `Optional[String]`



Default value: `undef`

##### `email_admin_user_name`

Data type: `Optional[String]`



Default value: `undef`

##### `email_destination_domain`

Data type: `Optional[Stdlib::Fqdn]`



Default value: `undef`

##### `email_notify_old_backup_days`

Data type: `Optional[Integer]`



Default value: `undef`

##### `hosts_file_dhcp`

Data type: `Optional[Stdlib::Absolutepath]`



Default value: `undef`

##### `hosts_file_user`

Data type: `Optional[String]`



Default value: 'backuppc'

##### `hosts_file_more_users`

Data type: `Optional[Array[String]]`



Default value: `undef`

##### `sudo_prepend`

Data type: `Optional[String]`



Default value: `undef`

### backuppc::params

Params class for backuppc used as a vehicle to pick up OS specific
defaults from hiera. The defaults in this class are suitable for Debian
systems.

#### Parameters

The following parameters are available in the `backuppc::params` class.

##### `package`

Data type: `String[1]`

The name of the backuppc package.

Default value: 'backuppc'

##### `service`

Data type: `String[1]`

The name of the backuppc service.

Default value: 'backuppc'

##### `config_directory`

Data type: `Stdlib::Absolutepath`

The location of the backuppc configuration

Default value: '/etc/backuppc'

##### `topdir`

Data type: `Stdlib::Absolutepath`

TODO

Default value: '/var/lib/backuppc'

##### `config`

Data type: `Stdlib::Absolutepath`

The name of the main configuration file. This sets the defaults for all hosts/clients.

Default value: "${backuppc::params::config_directory}/config.pl"

##### `hosts`

Data type: `Stdlib::Absolutepath`

The name of the main configuration file. This sets the defaults for all hosts/clients.

Default value: "${backuppc::params::config_directory}/hosts"

##### `install_directory`

Data type: `Stdlib::Absolutepath`

TODO

Default value: '/usr/share/backuppc'

##### `cgi_directory`

Data type: `Stdlib::Absolutepath`

TODO

Default value: "${backuppc::params::install_directory}/cgi-bin"

##### `cgi_image_dir`

Data type: `Stdlib::Absolutepath`

TODO

Default value: "${backuppc::params::install_directory}/image"

##### `cgi_image_dir_url`

Data type: `Stdlib::Absolutepath`

TODO

Default value: '/backuppc/image'

##### `log_directory`

Data type: `Stdlib::Absolutepath`

TODO

Default value: "${backuppc::params::topdir}/log"

##### `config_apache`

Data type: `Stdlib::Absolutepath`

The file where the backuppc specifc config for apache is stored.

Default value: '/etc/apache2/conf.d/backuppc.conf'

##### `group_apache`

Data type: `String[1]`

TODO

Default value: 'www-data'

##### `par_path`

Data type: `Variant[Stdlib::Absolutepath,Undef]`

Path to par executable

Default value: '/usr/bin/par2'

##### `gzip_path`

Data type: `Stdlib::Absolutepath`

Path to gzip executable

Default value: '/bin/gzip'

##### `bzip2_path`

Data type: `Stdlib::Absolutepath`

Path to bzip2 executable

Default value: '/bin/bzip2'

##### `tar_path`

Data type: `Stdlib::Absolutepath`

Path to tar executable

Default value: '/bin/tar'

##### `htpasswd_apache`

Data type: `Stdlib::Absolutepath`



Default value: "${backuppc::params::config_directory}/htpasswd"

### backuppc::server

The backuppc::server class.

#### Parameters

The following parameters are available in the `backuppc::server` class.

##### `ensure`

Data type: `Enum['present','absent']`



Default value: 'present'

##### `service_enable`

Data type: `Boolean`



Default value: `true`

##### `wakeup_schedule`

Data type: `Array[Integer[0,24]]`



Default value: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]

##### `max_backups`

Data type: `Integer`



Default value: 4

##### `max_user_backups`

Data type: `Integer`



Default value: 4

##### `language`

Data type: `String`



Default value: 'en'

##### `max_pending_cmds`

Data type: `Integer`



Default value: 15

##### `max_backuppc_nightly_jobs`

Data type: `Integer`



Default value: 2

##### `backuppc_nightly_period`

Data type: `Integer`



Default value: 1

##### `max_old_log_files`

Data type: `Integer`



Default value: 14

##### `df_max_usage_pct`

Data type: `Integer`



Default value: 95

##### `trash_clean_sleep_sec`

Data type: `Integer`



Default value: 300

##### `dhcp_address_ranges`

Data type: `Optional[Backuppc::DhcpAddressRange]`



Default value: []

##### `full_period`

Data type: `Numeric`



Default value: 6.97

##### `full_keep_cnt`

Data type: `Array[Integer]`



Default value: [1]

##### `full_age_max`

Data type: `Integer`



Default value: 90

##### `incr_period`

Data type: `Numeric`



Default value: 0.97

##### `incr_keep_cnt`

Data type: `Integer`



Default value: 6

##### `incr_age_max`

Data type: `Integer`



Default value: 30

##### `incr_levels`

Data type: `Array[Integer]`



Default value: [1]

##### `incr_fill`

Data type: `Boolean`



Default value: `false`

##### `partial_age_max`

Data type: `Integer`



Default value: 3

##### `restore_info_keep_cnt`

Data type: `Integer`



Default value: 10

##### `archive_info_keep_cnt`

Data type: `Integer`



Default value: 10

##### `blackout_good_cnt`

Data type: `Integer`



Default value: 7

##### `cgi_url`

Data type: `Stdlib::HTTPUrl`



Default value: "http://${facts['networking']['fqdn']}/backuppc/index.cgi"

##### `blackout_periods`

Data type: `Backuppc::BlackoutPeriods`



Default value: [ { hourBegin =>  7.0,
                                                                  hourEnd   => 19.5,
                                                                  weekDays  => [1, 2, 3, 4, 5],
                                                              }, ]

##### `backup_zero_files_is_fatal`

Data type: `Boolean`



Default value: `true`

##### `email_notify_min_days`

Data type: `Numeric`



Default value: 2.5

##### `email_from_user_name`

Data type: `String`



Default value: 'backuppc'

##### `email_admin_user_name`

Data type: `String`



Default value: 'backuppc'

##### `email_user_dest_domain`

Data type: `Optional[Stdlib::Fqdn]`



Default value: `undef`

##### `email_notify_old_backup_days`

Data type: `Integer`



Default value: 7

##### `email_headers`

Data type: `Hash`



Default value: { 'MIME-Version' => 1.0, 'Content-Type' => 'text/plain; charset="iso-8859-1"', }

##### `apache_configuration`

Data type: `Boolean`



Default value: `true`

##### `apache_allow_from`

Data type: `String`



Default value: 'all'

##### `apache_require_ssl`

Data type: `Boolean`



Default value: `false`

##### `backuppc_password`

Data type: `String`



Default value: ''

##### `topdir`

Data type: `Stdlib::Absolutepath`



Default value: $backuppc::params::topdir

##### `cgi_image_dir_url`

Data type: `Stdlib::Absolutepath`



Default value: $backuppc::params::cgi_image_dir_url

##### `cgi_admin_users`

Data type: `String`



Default value: 'backuppc'

##### `cgi_admin_user_group`

Data type: `String`



Default value: 'backuppc'

##### `cgi_date_format_mmdd`

Data type: `Integer[0,2]`



Default value: 1

##### `user_cmd_check_status`

Data type: `Boolean`



Default value: `true`

##### `ping_max_msec`

Data type: `Integer`



Default value: 20

##### `system_home_directory`

Data type: `Stdlib::Absolutepath`



Default value: '/var/backups'

## Defined types

### backuppc::server::user

Add user credentials to the backuppc htpasswd file.

#### Parameters

The following parameters are available in the `backuppc::server::user` defined type.

##### `ensure`

Data type: `Any`

Present or absent

Default value: 'present'

##### `username`

Data type: `Any`

Namevar. Defaults to the title if no value is provided.

Default value: `undef`

##### `password`

Data type: `Any`

Password for the account. Will be converted to a sha encrypted password.

Default value: ''

## Data types

### Backuppc::BackupFiles

Backuop Files

Alias of `Array[String]`

### Backuppc::BlackoutPeriods

Blackout Periods

Alias of `Array[Struct[{
    hourBegin => Variant[Integer[-24,24],Float[-24.0,24.0]],
    hourEnd   => Variant[Integer[-24,24],Float[-24.0,24.0]],
    weekDays  => Array[Integer[0,6]]
  }]]`

#### Parameters

The following parameters are available in the `Backuppc::BlackoutPeriods` data type.

##### `hourBegin`

start of blackout period

##### `hourEnd`

end of blackoiut period

##### `weekdays`

days of black period

### Backuppc::DhcpAddressRange

DHCP Address Range
This is an array of hashes for each class C address range. This is only needed
if hosts in the conf/hosts file have the dhcp flag set.

#### Examples

##### to specify 192.10.10.20 to 192.10.10.250 as the DHCP address pool

```puppet
dhcp_address_ranges => [
    {
        ipAddrBase => '192.10.10',
        first => 20,
        last  => 250,
    },
];
```

##### to specify two pools (192.10.10.20-250 and 192.10.11.10-50)

```puppet
dhcp_address_ranges => [
    {
        ipAddrBase => '192.10.10',
        first => 20,
        last  => 250,
    },
    {
        ipAddrBase => '192.10.11',
        first => 10,
        last  => 50,
    },
];
```

Alias of `Array[Struct[{
    ipAddressBase => Pattern[/\A([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])){2}\z/],
    first => Integer[0,255],
    last => Integer[0,255]
  }]]`

### Backuppc::XferLogLevel

Xfer Log Level
0 means be quiet, 1 will give will give one line per file, 2 will also show skipped files
on incrementals, higher values give more output.

Alias of `Integer[0, 2]`

### Backuppc::XferMethod

Numeric user ID.
If you have a mixed set of WinXX and linux/unix hosts you will need to override this
in the per-PC config.pl.

The valid values are:

 - 'smb':     backup and restore via smbclient and the SMB protocol.
              Easiest choice for WinXX.

 - 'rsync':   backup and restore via rsync (via rsh or ssh).
              Best choice for linux/unix.  Good choice also for WinXX.

 - 'rsyncd':  backup and restore via rsync daemon on the client.
              Best choice for linux/unix if you have rsyncd running on
              the client.  Good choice also for WinXX.

 - 'tar':    backup and restore via tar, tar over ssh, rsh or nfs.
             Good choice for linux/unix.

Alias of `Enum['smb', 'rsync', 'rsyncd', 'tar']`

